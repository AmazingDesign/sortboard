/*! Sortboard v1.0.0 | (c) 2014 Jose Luis Quintana | MIT */
!function(a){"use strict";if(!a.Sortboard){var b=function(b,c){this.currentFilter="all",this.elements=[],this.found=[],this.notfound=[],this.options={gutter:0,hiddenClass:".hidden",itemsMatchName:"li",filterComplete:null,sortComplete:null},this.addEvents=function(){var b=this;a.addEventListener("resize",function(){b.sort()},!1),b.sort()},this.setOptions=function(a){this.options=this.merge(this.options,a)},this.merge=function(a,b){var c;if(b)for(c in b)a[c]=b[c];return a},this.init=function(a,b){"object"==typeof a?a.nodeName?(this.setElement(a),this.setOptions(b),this.addEvents()):this.setOptions(b):this.error("Sortboard requires an HTML element.")},this.setElement=function(a){this.element=a},this.sort=function(){var a,b,c,d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0;h=this.element.parentElement.offsetWidth,b=this.options.gutter,c=this.getElements(this.options.itemsMatchName),this.size=c.length;var n=new RegExp("("+this.options.hiddenClass.replace(".","")+")+","i");for(d=0;d<this.size;++d)a=c[d],a.className.match(n)||(f=a.offsetWidth,g=a.offsetHeight,i>=h-g-b?(i=0,j+=g+b,m||(m=e*f+(e*b-b))):i+=e?b:0,i+=f,k=i-f,l=j+g,e++,a.setAttribute("data-cords",k+","+j),this.translate(a,k+","+j,!1));this.element.style.width=(m?m:e*f+(2>e?e:e-1)*b).toString()+"px",this.element.style.height=l.toString()+"px",this.options.sortComplete&&"function"==typeof this.options.sortComplete&&this.options.sortComplete()},this.filterBy=function(a){if(this.currentFilter!==a){var b,c,d,e,f,g,h,i=[];for(f=new RegExp(a,"i"),h=this.getElements(this.options.itemsMatchName),b=0;b<this.size;++b)g=h[b],c=g.getAttribute("data-filter"),c&&-1!==c.search(f)&&i.push(g);if(!i.length&&"all"!==a)return;for(this.currentFilter=a,this.found=[],this.notfound=[],b=0;b<this.size;++b)g=h[b],e=g.getAttribute("data-cords"),"all"===a?(this.found.push(g),this.translate(g,e,!1)):(c=g.getAttribute("data-filter"),d=c&&-1!==c.search(f),d?this.found.push(g):this.notfound.push(g),this.translate(g,e,!d));this.options.filterComplete&&"function"==typeof this.options.filterComplete&&this.options.filterComplete({found:this.found||[],notfound:this.notfound||[]}),this.sort()}},this.translate=function(a,b,c){var d="matrix(1,0,0,1,"+b+") scale("+(c?"0.001":"1")+")";a.className=c?this.options.hiddenClass.replace(".",""):"",a.style.setProperty("opacity",c?"0":"1"),a.style.setProperty("-webkit-transform",d),a.style.setProperty("-moz-transform",d),a.style.setProperty("transform",d)},this.getElements=function(a){return this.elements.length||(this.elements=a.match(/^\.(.+)$/)?this.element.getElementsByClassName(a):this.element.getElementsByTagName(a)),this.elements},this.error=function(b){a.console&&a.console.error(b)},this.init(b,c)};a.Sortboard=function(a,c){var d=new b(a,c);return{filterBy:function(a){d.filterBy(a)},sort:function(){d.sort()},getFilter:function(){return d.currentFilter},getItems:function(){return d.elements},getFoundItems:function(){return d.found},getNotFoundItems:function(){return d.notfound}}}}}(this);